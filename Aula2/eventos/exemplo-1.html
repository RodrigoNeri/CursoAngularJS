<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="UTF-8">
    <title>AngularJS</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
</head>
<body>
    <div class="container-fluid">
        <div class="page-header">
            <h2>AngularJS - Aula 2 <small>Eventos - Exemplo 1</small></h2>    
            <p>Exemplo de emissão e escuta de eventos no mesmo controller.</p>
        </div>

        <pre><code class="html" ng-bind="code | unsafe" language="html"></code></pre>

        <div ng-controller="FirstCtrl">
            <button class="btn btn-default" ng-click="enviarEvento()">Emitir evento</button>
        </div>

        <hr>

        <a href="#" class="btn btn-primary btn-block">Próximo exemplo</a>  
    </div>

    <script type="text/template" id="code">
        <div ng-controller="FirstCtrl">
            <button class="btn btn-default" ng-click="enviarEvento()">Emitir evento</button>
        </div>

        var app = angular.module('app', []);

        app.controller('FirstCtrl', function($scope) {
            $scope.$on('task.created', function(e, task) {
                alert(task.title);
            });

            $scope.enviarEvento = function() {
                $scope.$emit('task.created', {title: 'Tarefa 1'});
            };

            $scope.code
        });
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
    <script src="../assets/js/code.js"></script>
    <script>
    var app = angular.module('app', []);

    app.controller('FirstCtrl', function($scope) {
        $scope.$on('task.created', function(e, task) {
            console.log(e);
            alert(task.title);
        });

        $scope.enviarEvento = function() {
            $scope.$emit('task.created', {title: 'Tarefa 1'});
        };

        $scope.code = document.getElementById('code').innerHTML;
    });
    </script>
</body>
</html>